<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>X vs O Betting</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
        color: white;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background-color: rgba(0, 0, 0, 0.7);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      }

      header {
        text-align: center;
        margin-bottom: 30px;
        padding-bottom: 15px;
        border-bottom: 2px solid rgba(255, 255, 255, 0.3);
      }

      h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .rules {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        font-size: 0.9rem;
      }

      .game-status {
        text-align: center;
        font-size: 1.2rem;
        margin-bottom: 20px;
        padding: 10px;
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
      }

      .teams-container {
        display: flex;
        justify-content: space-between;
        gap: 20px;
        margin-bottom: 30px;
      }

      .team {
        flex: 1;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        padding: 15px;
        text-align: center;
      }

      .team-x {
        border: 2px solid #3498db;
      }

      .team-o {
        border: 2px solid #e74c3c;
      }

      .team-title {
        font-size: 1.5rem;
        margin-bottom: 10px;
      }

      .total-amount {
        font-size: 1.8rem;
        margin: 15px 0;
        font-weight: bold;
      }

      .bets-count {
        font-size: 0.9rem;
        color: #ccc;
      }

      .bet-form {
        margin-top: 15px;
      }

      input,
      select,
      button {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: none;
        border-radius: 5px;
        font-size: 1rem;
      }

      input {
        background-color: rgba(255, 255, 255, 0.9);
      }

      button {
        background-color: #2ecc71;
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      button:hover {
        background-color: #27ae60;
      }

      .recent-bets {
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 20px;
      }

      .recent-bets h2 {
        margin-bottom: 15px;
        text-align: center;
      }

      .bet-item {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      }

      .bet-item:last-child {
        border-bottom: none;
      }

      .bet-status {
        display: inline-block;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .won {
        background-color: #2ecc71;
      }

      .lost {
        background-color: #e74c3c;
      }

      .pending {
        background-color: #f39c12;
      }

      .winner-section {
        text-align: center;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        padding: 15px;
        margin-top: 20px;
      }

      .winner-amount {
        font-size: 1.5rem;
        font-weight: bold;
        margin: 10px 0;
        color: #2ecc71;
      }

      .game-controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
      }

      .game-controls button {
        flex: 1;
        max-width: 200px;
      }

      .reset-btn {
        background-color: #e74c3c;
      }

      .reset-btn:hover {
        background-color: #c0392b;
      }

      @media (max-width: 600px) {
        .teams-container {
          flex-direction: column;
        }

        h1 {
          font-size: 2rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>X vs O Betting</h1>
        <div class="rules">
          <p>
            <strong>Rules:</strong> Team with lower total wins - Winners get 2X
            - Tie = Owner wins all
          </p>
        </div>
        <div class="game-status" id="gameStatus">Game In Progress</div>
      </header>

      <div class="teams-container">
        <div class="team team-x">
          <h2 class="team-title">Team X</h2>
          <div class="total-amount" id="teamXTotal">2,000 UZS</div>
          <div class="bets-count" id="teamXBets">1 bets placed</div>
          <div class="bet-form">
            <input type="text" id="xBetName" placeholder="Your Name" />
            <input
              type="number"
              id="xBetAmount"
              placeholder="Bet Amount (UZS)"
              min="100"
              value="1000"
            />
            <button onclick="placeBet('X')">Bet on Team X</button>
          </div>
        </div>

        <div class="team team-o">
          <h2 class="team-title">Team O</h2>
          <div class="total-amount" id="teamOTotal">3,000 UZS</div>
          <div class="bets-count" id="teamOBets">1 bets placed</div>
          <div class="bet-form">
            <input type="text" id="oBetName" placeholder="Your Name" />
            <input
              type="number"
              id="oBetAmount"
              placeholder="Bet Amount (UZS)"
              min="100"
              value="1000"
            />
            <button onclick="placeBet('O')">Bet on Team O</button>
          </div>
        </div>
      </div>

      <div class="recent-bets">
        <h2>Recent Bets</h2>
        <div id="recentBetsList">
          <!-- Recent bets will be displayed here -->
        </div>
      </div>

      <div class="winner-section" id="winnerSection" style="display: none">
        <h2>Winner</h2>
        <div id="winnerName">Pahlavon</div>
        <div class="winner-amount" id="winnerAmount">Won: 4,000 UZS</div>
      </div>

      <div class="game-controls">
        <button onclick="endGame()">End Game</button>
        <button class="reset-btn" onclick="resetGame()">Reset Game</button>
      </div>
    </div>

    <script>
      // Game state
      let gameState = {
        teamX: {
          total: 2000,
          bets: 1,
          bettors: [],
        },
        teamO: {
          total: 3000,
          bets: 1,
          bettors: [],
        },
        recentBets: [{ name: "Lol", amount: 3000, team: "O", status: "Lost" }],
        gameEnded: false,
      };

      // Initialize the game display
      function initializeGame() {
        updateDisplay();
      }

      // Update the game display
      function updateDisplay() {
        document.getElementById("teamXTotal").textContent =
          formatCurrency(gameState.teamX.total) + " UZS";
        document.getElementById("teamXBets").textContent =
          gameState.teamX.bets + " bets placed";
        document.getElementById("teamOTotal").textContent =
          formatCurrency(gameState.teamO.total) + " UZS";
        document.getElementById("teamOBets").textContent =
          gameState.teamO.bets + " bets placed";

        updateRecentBets();

        if (gameState.gameEnded) {
          document.getElementById("gameStatus").textContent = "Game Ended";
          document.getElementById("gameStatus").style.backgroundColor =
            "rgba(231, 76, 60, 0.3)";
        } else {
          document.getElementById("gameStatus").textContent =
            "Game In Progress";
          document.getElementById("gameStatus").style.backgroundColor =
            "rgba(46, 204, 113, 0.3)";
        }
      }

      // Format currency with commas
      function formatCurrency(amount) {
        return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }

      // Update the recent bets list
      function updateRecentBets() {
        const recentBetsList = document.getElementById("recentBetsList");
        recentBetsList.innerHTML = "";

        gameState.recentBets.forEach((bet) => {
          const betItem = document.createElement("div");
          betItem.className = "bet-item";

          const statusClass =
            bet.status === "Won"
              ? "won"
              : bet.status === "Lost"
              ? "lost"
              : "pending";

          betItem.innerHTML = `
                    <div>
                        <strong>${bet.name}</strong><br>
                        ${formatCurrency(bet.amount)} UZS
                    </div>
                    <div>
                        <span class="bet-status ${statusClass}">${
            bet.status
          }</span><br>
                        Team ${bet.team}
                    </div>
                `;

          recentBetsList.appendChild(betItem);
        });
      }

      // Place a bet
      function placeBet(team) {
        if (gameState.gameEnded) {
          alert("Game has ended. Please reset to start a new game.");
          return;
        }

        const nameField =
          team === "X"
            ? document.getElementById("xBetName")
            : document.getElementById("oBetName");
        const amountField =
          team === "X"
            ? document.getElementById("xBetAmount")
            : document.getElementById("oBetAmount");

        const name = nameField.value.trim();
        const amount = parseInt(amountField.value);

        if (!name) {
          alert("Please enter your name.");
          return;
        }

        if (isNaN(amount) || amount < 100) {
          alert("Please enter a valid bet amount (minimum 100 UZS).");
          return;
        }

        // Update game state
        if (team === "X") {
          gameState.teamX.total += amount;
          gameState.teamX.bets++;
          gameState.teamX.bettors.push({ name, amount });
        } else {
          gameState.teamO.total += amount;
          gameState.teamO.bets++;
          gameState.teamO.bettors.push({ name, amount });
        }

        // Add to recent bets
        gameState.recentBets.unshift({
          name,
          amount,
          team,
          status: "Pending",
        });

        // Clear form fields
        nameField.value = "";
        amountField.value = "1000";

        updateDisplay();
      }

      // End the game and determine winner
      function endGame() {
        if (gameState.gameEnded) {
          alert("Game has already ended.");
          return;
        }

        gameState.gameEnded = true;

        let winnerTeam, winningAmount;

        if (gameState.teamX.total < gameState.teamO.total) {
          winnerTeam = "X";
          winningAmount = gameState.teamX.total * 2;
        } else if (gameState.teamO.total < gameState.teamX.total) {
          winnerTeam = "O";
          winningAmount = gameState.teamO.total * 2;
        } else {
          // Tie - owner wins all
          winnerTeam = "Owner";
          winningAmount = gameState.teamX.total + gameState.teamO.total;
        }

        // Update recent bets with win/loss status
        gameState.recentBets.forEach((bet) => {
          if (bet.team === winnerTeam || winnerTeam === "Owner") {
            bet.status = winnerTeam === "Owner" ? "Lost" : "Won";
          } else {
            bet.status = "Lost";
          }
        });

        // Show winner section
        const winnerSection = document.getElementById("winnerSection");
        document.getElementById("winnerName").textContent =
          winnerTeam === "Owner" ? "Owner" : "Team " + winnerTeam;
        document.getElementById("winnerAmount").textContent =
          "Won: " + formatCurrency(winningAmount) + " UZS";
        winnerSection.style.display = "block";

        updateDisplay();
      }

      // Reset the game
      function resetGame() {
        gameState = {
          teamX: {
            total: 0,
            bets: 0,
            bettors: [],
          },
          teamO: {
            total: 0,
            bets: 0,
            bettors: [],
          },
          recentBets: [],
          gameEnded: false,
        };

        document.getElementById("winnerSection").style.display = "none";
        updateDisplay();
      }

      // Initialize the game when page loads
      window.onload = initializeGame;
    </script>
  </body>
</html>
